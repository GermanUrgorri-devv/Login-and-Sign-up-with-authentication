<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>login</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="large">login</ion-title>
    </ion-toolbar>
  </ion-header>

  <div mode="md" class="w-75 mt-5 m-auto">
    <form [formGroup]="loginForm" (ngSubmit)="login()">

      <ion-item fill="solid">

        <ion-input label="Email" labelPlacement="floating" formControlName="email" id="email"
          placeholder="Log with your email" type="email" (ionChange)="toggleLoginErrorVisibility('email')"></ion-input>

        <ion-note color="danger" slot="helper" *ngIf="errorVisibility.email">{{emailError}}</ion-note>

      </ion-item>


      <ion-item fill="solid">

        <ion-input label="Password" labelPlacement="floating" formControlName="password" id="password"
          class="password-field" type="password" (ionChange)="toggleLoginErrorVisibility('password')"></ion-input>

        <ion-button class="eye" fill="clear" slot="end" (click)="togglePasswordVisibility()">
          <ion-icon slot="icon-only" [name]="showPassword ? 'eye' : 'eye-off'"></ion-icon>
        </ion-button>

        <ion-note color="danger" slot="helper" *ngIf="errorVisibility.password">{{passwordError}}</ion-note>

      </ion-item>

      <ion-button type="submit" class="w-100">
        Login
      </ion-button>


    </form>
  </div>

  <div mode="md" class="w-75 m-auto mt-5">
    <form class="h-400 d-flex flex-column justify-content-between" [formGroup]="registerForm" (ngSubmit)="register()">
      <div>
        <ion-item fill="solid">
          <ion-input label="Email" labelPlacement="floating" formControlName="email" placeholder="Write a valid email"
            type="email" (ionChange)="toggleRegisterErrorVisibility('email')"></ion-input>
          <ion-note color="danger" slot="helper" *ngIf="registerErrorVisibility.email">{{registerEmailError}}</ion-note>
        </ion-item>
        <ion-item fill="solid">
          <ion-input label="Password" labelPlacement="floating" formControlName="password" id="passwordRegistrer"
            type="password" class="password-field" placeholder="The password must have at least 6 characters" 
            (ionChange)="toggleRegisterErrorVisibility('password')"></ion-input>
          <ion-button class="eye" fill="clear" slot="end" (click)="togglePasswordVisibility()">
            <ion-icon slot="icon-only"  [name]="showPassword ? 'eye' : 'eye-off'"></ion-icon>
          </ion-button>
          <ion-note color="danger" slot="helper" *ngIf="registerErrorVisibility.password">
            {{registerPasswordError}}
          </ion-note>
        </ion-item>
        <ion-item fill="solid" class="ion-invalid">
          <ion-input label="Repeat password" labelPlacement="floating" formControlName="repeatPassword"
            id="repeatPassword" type="password" class="password-field" 
            (ionChange)="toggleRegisterErrorVisibility('repeatPassword')"></ion-input>
          <ion-button class="eye" fill="clear" slot="end" (click)="togglePasswordVisibility()">
            <ion-icon slot="icon-only" [name]="showPassword ? 'eye' : 'eye-off'"></ion-icon>
          </ion-button>
        </ion-item>
        <ion-button type="submit" class="w-100" >
          Register
        </ion-button>
      </div>
    </form>
    
  </div>
</ion-content>